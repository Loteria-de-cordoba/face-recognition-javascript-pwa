<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <title>Backoffice</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="jquery-3.7.1/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
        integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
        crossorigin="anonymous"></script>

    <script src="sweetalert2@11/sweetalert2@11.js"></script>
    <script src="librerias/twbs-pagination-master/jquery.twbsPagination.min.js" type="text/javascript"></script>
    <script src="librerias/fontawesome-free-6.4.2-web/js/all.min.js"></script>


    <!-- <script type="text/javascript" src="js/app.js"></script> -->

    <!-- <script type="text/javascript" src="app.js"></script>
    <script src="backoffice.js"></script> -->

</head>

<body>

    <!-- <h1>Lista de Cámaras Disponibles</h1>
    <ul id="cameraList"></ul> -->

    <div class="container mt-5">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link" id="tab2-tab" data-toggle="tab" href="#personas" role="tab2" aria-controls="tab12"
                    aria-selected="true">Pers.</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="tab3-tab" data-toggle="tab" href="#movimientos" role="tab" aria-controls="tab3"
                    aria-selected="false">Reg.</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="tab4-tab" data-toggle="tab" href="#usuarios" role="tab" aria-controls="tab4"
                    aria-selected="true">Users</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="tab5-tab" data-toggle="tab" href="#password" role="tab" aria-controls="tab5"
                    aria-selected="true">Pass.</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="tab5-tab" data-toggle="tab" href="#push" role="tab" aria-controls="tab5"
                    aria-selected="true">Push</a>
            </li>
            <li class="nav-item" id="nav-item-salir">
                <a class="nav-link" id="tab6-tab" data-toggle="tab" href="#salir" role="tab" aria-controls="tab6"
                    onclick="salir()" aria-selected="false">Exit</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">

            <div class="tab-pane fade" id="personas" role="tabpanel" aria-labelledby="tab2-tab">
                <div id="includedContent">
                    <div class="card">
                        <div class="card-body">


                            <table class="table table-hover" id="table-personas">
                                <thead>
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Foto</th>
                                        <th scope="col">Nombre</th>
                                        <th scope="col">Apellido</th>
                                        <th scope="col">Documento</th>
                                        <th scope="col">Email</th>
                                        <th scope="col">Legajo</th>
                                        <th scope="col">&nbsp;</th>
                                    </tr>
                                </thead>
                                <tbody class="table-group-divider"></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="d-flex align-items-center justify-content-center">
                        <div class="p-2 m-2">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" id="pagination-personas"></ul>
                            </nav>
                        </div>
                    </div>

                </div>

            </div>

            <div class="tab-pane fade" id="movimientos" role="tabpanel" aria-labelledby="tab3-tab">
                <div id="includedContent">
                    <div class="card">
                        <div class="card-body">


                            <table class="table table-hover" id="table-registro">
                                <thead>
                                    <tr>
                                        <th scope="col">Legajo</th>
                                        <th scope="col">Nombre</th>
                                        <th scope="col">Apellido</th>
                                        <th scope="col">Tipo</th>
                                        <th scope="col">Fecha</th>
                                    </tr>
                                </thead>
                                <tbody class="table-group-divider"></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="d-flex align-items-center justify-content-center">
                        <div class="p-2 m-2">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" id="pagination-registro"></ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>


            <div class="tab-pane fade" id="usuarios" role="tabpanel" aria-labelledby="tab4-tab">
                <div id="includedContent">
                    <!-- <video id="video-face-recognition" width="" height="auto" autoplay> -->
                    <div class="card">
                        <div class="card-body">

                            <div class="form-group row mt-4">
                                <div class="col-md-3 mb-3">
                                    <label for="email_user">Email</label>
                                    <input type="email" class="form-control" id="email_user" placeholder="Email"
                                        required>
                                    <div class="valid-feedback">
                                        Direccion valida!
                                    </div>
                                    <div class="invalid-feedback">
                                        Por favor complete...
                                    </div>
                                </div>

                                <div class="col-md-2 mb-3">
                                    <label for="nombre_user">Nombre</label>
                                    <input type="text" class="form-control" id="nombre_user" placeholder="Nombre"
                                        maxlength="20" required>
                                    <div class="valid-feedback">
                                        Correcto!
                                    </div>
                                    <div class="invalid-feedback">
                                        Por favor complete...
                                    </div>
                                </div>

                                <div class="col-md-2 mb-3">
                                    <label for="apellido_user">Apellido</label>
                                    <input type="text" class="form-control" id="apellido_user" placeholder="Apellido"
                                        maxlength="20" required>
                                    <div class="valid-feedback">
                                        Correcto!
                                    </div>
                                    <div class="invalid-feedback">
                                        Por favor complete...
                                    </div>
                                </div>

                                <div class="col-md-2 mb-3">
                                    <label for="documento_user">Documento</label>
                                    <input type="text" class="form-control" id="documento_user" placeholder="Documento"
                                        maxlength="20" required>
                                    <div class="valid-feedback">
                                        Correcto!
                                    </div>
                                    <div class="invalid-feedback">
                                        Por favor complete...
                                    </div>
                                </div>

                                <div class="col-md-2 mt-4">
                                    <div class="d-grid gap-2">
                                        <button type="button" id="aceptar_1" class="btn btn-primary"
                                            onclick="agregarUsuario();">Agregar</button>
                                    </div>
                                </div>
                            </div>


                            <table class="table table-hover" id="table-usuarios">
                                <thead>
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Nombre</th>
                                        <th scope="col">Apellido</th>
                                        <th scope="col">Documento</th>
                                        <th scope="col">Email</th>
                                        <th scope="col">&nbsp;</th>
                                    </tr>
                                </thead>
                                <tbody class="table-group-divider"></tbody>
                            </table>
                        </div>
                    </div>


                    <div class="d-flex align-items-center justify-content-center">
                        <div class="p-2 m-2">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" id="pagination-usuarios"></ul>
                            </nav>
                        </div>
                    </div>

                </div>

            </div>


            <!-- Pantalla de cambio de clave -->
            <div class="tab-pane container mb-5" id="password">
                <div class="row mt-3">
                    <div class="col-sm-4"></div>
                    <div class="col-sm-4">
                        <!-- <img src="../assets/logo-loteria.jpg" width="100" height="45" alt="Lotería de Córdoba S.E."> -->

                        <div class="card mt-3">
                            <div class=" card-header text-center">
                                <h1 class="h2 mt-3">Cambio de clave</h1>
                                <!-- <p class="lead">Loteria de Cordoba S.E. -->
                                </p>
                            </div>
                            <div class="card-body">
                                <form">
                                    <div class="mb-3">
                                        <!-- <label for="InputPassword1" class="form-label">Email</label> -->
                                        <input type="password" class="form-control" id="InputPassword1"
                                            placeholder="Ingrese nueva clave">
                                        <div class="valid-feedback">
                                            Correcto son iguales!
                                        </div>
                                        <div class="invalid-feedback">
                                            Por favor complete, o son distintas...
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <!-- <label for="InputPassword2" class="form-label">Email</label> -->
                                        <input type="password" class="form-control" id="InputPassword2"
                                            placeholder="Re ingrese nueva clave">
                                        <div class="valid-feedback">
                                            Correcto son iguales!
                                        </div>
                                        <div class="invalid-feedback">
                                            Por favor complete, o son distintas...
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <button type="botton" onclick="modificarClave();"
                                                class="btn btn-primary btn-block">Modificar</button>
                                        </div>
                                    </div>
                                    </form>
                            </div>
                        </div>
                        <div class="col-sm-4"></div>
                    </div>
                </div>
            </div>


            <!-- Pantalla de notificaciones -->
            <div class="tab-pane container mb-5" id="push">
                <div class="row mt-3">
                    <div class="col-sm-4"></div>
                    <div class="col-sm-4">
                        <!-- <img src="../assets/logo-loteria.jpg" width="100" height="45" alt="Lotería de Córdoba S.E."> -->
                        <div class="card">
                            <h5 class="card-header">Notificaciones Push</h5>
                            <div class="card-body">
                                <h5 class="card-title">Administracion</h5>
                                <p class="card-text">Activar - Desactivar - Enviar</p>
                                <button class="btn btn-primary mt-3" id="push-subscription-button">Push notifications
                                    !</button>
                                <button class="btn btn-danger mt-3" id="send-push-button">Send a push
                                    notification</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>

</body>


<script>

    // Función para obtener el parámetro 'id' de la URL
    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    // Obtener el parámetro 'server' de la URL que es la url que lo llamo
    var server = getParameterByName('server');

    // var server = window.location.host;

    var token;
    var url_personas = `https://${server}/backend/api/personas/index.php`;
    var url_usuarios = `https://${server}/backend/api/usuarios/index.php`;
    var url_login = `https://${server}`;
    $(document).ready(function () {

        iniciarEventos();

        console.log("ready!");

        // const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        function isMobile() {
            var match = window.matchMedia || window.msMatchMedia;
            if (match) {
                var mq = match("(pointer:coarse)");
                return mq.matches;
            }
            return false;
        }
        if (isMobile()) {
            $('#nav-item-salir').hide();
        }


        $('#email_user').val('');
        $('#apellido_user').val('');
        $('#nombre_user').val('');
        $("#documento_user").val('');
        $("#InputPassword1").val('').removeClass("is-valid").removeClass("is-invalid");
        $("#InputPassword2").val('').removeClass("is-valid").removeClass("is-invalid");

        $("#email").on('input', function () {
            validarEmail($("#email"));
        });

        $("#email_user").on('input', function () {
            validarEmail($("#email_user"));
        });

        $("#nombre_user").on('input', function () {
            validarCampo($("#nombre_user"));
        });

        $("#apellido_user").on('input', function () {
            validarCampo($("#apellido_user"));
        });

        $("#documento_user").on('input', function () {
            validarCampo($("#documento_user"));
        });

        $("#InputPassword1").on('input', function () {
            validarDobleClave($("#InputPassword1"), $("#InputPassword2"));
        });

        $("#InputPassword2").on('input', function () {
            validarDobleClave($("#InputPassword1"), $("#InputPassword2"));
        });


        cargarComponentes();

        // setInterval(function () { getRegistro(1) }, 5000);

    });

</script>

</body>

</html>